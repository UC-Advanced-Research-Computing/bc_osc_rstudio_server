---
batch_connect:
  template: "basic"
  conn_params:
    - csrf_token
script:
  queue_name: "<%= custom_queue %>"
  native:
    - "--nodes"
    - "<%= bc_num_slots.blank? ? 1 : bc_num_slots.to_i %>"
    - "--ntasks"
    - "<%= bc_num_slots.blank? ? 1 : bc_num_slots.to_i %>"
    - "--cpus-per-task"
    - "<%= num_cpus.blank? ? 1 : num_cpus.to_i %>"
    - "--gres=gpu:<%= defined?(num_gpus) && !num_gpus.blank? ? num_gpus : "0" %>"
